image: python:3.7.2

pipelines:
  default:
    - step:
        script:
          - pip install -r backend/requirements.txt
          - cd backend/pact/ && ./manage.py test --keepdb
        services:
          - postgres

definitions:
  services:
    postgres:
      image: postgres
      variables: 
        POSTGRES_DB: 'test_pact' 
        POSTGRES_USER: 'pact'
        POSTGRES_PASSWORD: 'pact'
